<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP32 Led Strip Driver: ESP32 Led Strip Driver (RGB and RGBW)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ESP32 Led Strip Driver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ESP32 Led <a class="el" href="classStrip.html" title="General and abstract led Strip class.">Strip</a> Driver (RGB and RGBW) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Driver for Strip/NeoPixel data. </p><dl class="section author"><dt>Author</dt><dd>PaulBreugnot </dd></dl>
<dl class="section see"><dt>See also</dt><dd>GitHub : <a href="https://github.com/PixLed/ESP32_RGBW_Led_Driver/">https://github.com/PixLed/ESP32_RGBW_Led_Driver/</a></dd></dl>
<p>NeoPixels or Strips are LED devices that can illuminate in arbitrary colors with 8 bits of data for each of the red, green and blue channels. These devices can be daisy chained together to produce a string of LEDs. If we call each LED instance a pixel, then when we want to set the value of a string of pixels, we need to supply the data for all the pixels. This class encapsulates setting the color value for an individual pixel within the string and, once you have set up all the desired colors, you can then set all the pixels in a show() operation. The class hides from you the underlying details needed to drive the devices.</p>
<p>Currently, RGB Strips (<a class="el" href="classWS2812.html" title="WS2812 RGB strip implementation.">WS2812</a> or NeoPixels, <a class="el" href="classSK6812.html" title="SK6812 RGB strip implementation.">SK6812</a>) and RGBW strips are supported. For RGBW strips, you can either drive manually the 4 leds (be careful to energy consumption if you set the 4 to high value) or drive them normally in RGB. If you do so, the color will be converted to RGBW for a "smart" white composant usage (from <a href="https://stackoverflow.com/questions/40312216/converting-rgb-to-rgbw">https://stackoverflow.com/questions/40312216/converting-rgb-to-rgbw</a>). A simpler function is also available : </p><div class="fragment"><div class="line">w = min(r, g, b)</div><div class="line">r, g, b = r - w, g - w, b - w</div></div><!-- fragment --><p>The choice between strip models is made instanciating the corresponding class. Then, functions to set pixels color and show them are equal.</p>
<p>Example code to drive RGBW and RGB strips with the same commands :</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="LedStrip_8h.html">LedStrip.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define WS2812_PIN 14</span></div><div class="line"><span class="preprocessor">#define SK6812_PIN 12</span></div><div class="line"><span class="preprocessor">#define NUM_LED 5</span></div><div class="line"></div><div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line">   <span class="keywordtype">void</span> app_main();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> app_main()</div><div class="line">{</div><div class="line">  <a class="code" href="classSK6812W.html">SK6812W</a> sk6812 = <a class="code" href="classSK6812W.html">SK6812W</a>((gpio_num_t) SK6812_PIN, NUM_LED, RMT_CHANNEL_0);</div><div class="line">  <a class="code" href="classWS2812.html">WS2812</a> ws2812 = <a class="code" href="classWS2812.html">WS2812</a>((gpio_num_t) WS2812_PIN, NUM_LED, RMT_CHANNEL_1);</div><div class="line">  <span class="keywordflow">while</span>(1) {</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> h=0; h &lt; 360; h++) {</div><div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; NUM_LED; i++) {</div><div class="line">          sk6812.<a class="code" href="classRGBW__Strip.html#a1235dd3fa14078690b84d7bb752aba73">setHSBPixel</a>(i, h, 0.8, 0.7);</div><div class="line">          ws2812.<a class="code" href="classRGB__Strip.html#a25e7b2c061f21f544e181773180bc162">setHSBPixel</a>(i, h, 0.8, 0.7);</div><div class="line">      }</div><div class="line">      sk6812.<a class="code" href="classRGBW__Strip.html#a6951fd2265c832e98c9f02b5d3fb4af6">show</a>();</div><div class="line">      ws2812.<a class="code" href="classRGB__Strip.html#a0cadc931b23e8d5f0ee4bfd8eac92e0b">show</a>();</div><div class="line">      vTaskDelay(50 / portTICK_PERIOD_MS);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
